(this["webpackJsonpproject-10"]=this["webpackJsonpproject-10"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(5),r=n.n(s),i=(n(14),n(6)),c=n(1),l=n(2),p=n(4),u=n(3),m=n(8),h=n.n(m),_=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("header",{className:"header page__section"},o.a.createElement("img",{className:"header__logo",src:h.a,alt:"header logo"}))}}]),n}(o.a.Component),d=new(function(){function e(t,n){Object(c.a)(this,e),this._baseUrl=t,this._options=n}return Object(l.a)(e,[{key:"getUserInfo",value:function(){return this._options.method="GET",fetch("".concat(this._baseUrl,"users/me"),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log("logged "+e)}))}},{key:"getInitialCards",value:function(){return this._options.method="GET",fetch("".concat(this._baseUrl,"cards"),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"addNewCard",value:function(e){return this._options.method="POST",this._options.body=JSON.stringify({name:e.name,link:e.link}),fetch("".concat(this._baseUrl,"cards"),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return this._options.method="DELETE",fetch("".concat(this._baseUrl,"cards/").concat(e._cardID),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log(e)}))}},{key:"setUserAvatar",value:function(e){return this._options.method="PATCH",this._options.body=JSON.stringify({avatar:e["profile-pic"]}),fetch("".concat(this._baseUrl,"users/me/avatar"),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log(e)}))}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.profession;return this._options.method="PATCH",this._options.body=JSON.stringify({name:t,about:n}),fetch("".concat(this._baseUrl,"users/me"),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log(e)}))}},{key:"setLikeForImage",value:function(e){return this._options.method="PUT",fetch("".concat(this._baseUrl,"cards/likes/").concat(e._id),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log(e)}))}},{key:"removeLikeForImage",value:function(e){return this._options.method="DELETE",fetch("".concat(this._baseUrl,"cards/likes/").concat(e._id),this._options).then((function(e){if(e.ok)return e.json();Promise.reject("Error "+e.statusText)})).catch((function(e){console.log(e)}))}}]),e}())("https://around.nomoreparties.co/v1/group-3/",{headers:{authorization:"0519b525-02c0-4fb8-9c6d-6c37076de85e","Content-Type":"application/json"}}),f=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){console.log(e.props),e.props.onCardClick(e.props)},e}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("li",{className:"elements__list-item"},o.a.createElement("button",{className:"elements__trash button"}),o.a.createElement("img",{className:"elements__image",src:this.props.link,alt:"location",onClick:this.handleClick}),o.a.createElement("div",{className:"elements__title-container"},o.a.createElement("h2",{className:"elements__location-name"},this.props.name),o.a.createElement("div",{className:"elements__like-container"},o.a.createElement("button",{className:"elements__like button"}),o.a.createElement("p",{className:"elements__number-likes"},this.props.likes))))}}]),n}(o.a.Component),b=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={userName:"",userDescription:"",userAvatar:"",cards:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("component did mount"),d.getUserInfo().then((function(t){e.setState({userName:t.name,userDescription:t.about,userAvatar:t.avatar})})),d.getInitialCards().then((function(t){console.log(t),e.setState({cards:t.map((function(t,n){return o.a.createElement(f,{key:n,link:t.link,name:t.name,likes:t.likes.length,onCardClick:function(t){e.props.onCardClick(t)}})}))})}))}},{key:"render",value:function(){return o.a.createElement("main",null,o.a.createElement("section",{className:"profile page__section"},o.a.createElement("img",{className:"profile__avatar",src:this.state.userAvatar,alt:""}),o.a.createElement("button",{className:"profile__avatar-button button",onClick:this.props.onEditAvatar}),o.a.createElement("div",{className:"profile__info"},o.a.createElement("div",{className:"profile__name-container"},o.a.createElement("h1",{className:"profile__name"},this.state.userName),o.a.createElement("button",{className:"profile__edit-button button",onClick:this.props.onEditProfile})),o.a.createElement("p",{className:"profile__about-me"},this.state.userDescription)),o.a.createElement("button",{className:"profile__add-button button",onClick:this.props.onAddPlace})),o.a.createElement("section",{className:"elements page__section"},o.a.createElement("ul",{className:"elements__list"},this.state.cards)))}}]),n}(o.a.Component),E=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("footer",{className:"footer page__section"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))}}]),n}(o.a.Component),k=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"popup popup_type_".concat(this.props.type," ").concat(this.props.open)},o.a.createElement("div",{className:"popup__dialog-window"},o.a.createElement("button",{className:"popup__close button",onClick:this.props.onClosePopup}),o.a.createElement("form",{className:"popup__form",action:"#",noValidate:!0,autoComplete:"off"},o.a.createElement("h2",{className:"popup__title"},this.props.title),o.a.createElement("input",{className:"popup__input popup__input_margin_top-input popup__input_type_name",id:"name-input",type:"text",name:"name",minLength:"2",maxLength:"40",placeholder:this.props.placeholder1,required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"name-input-error"}),o.a.createElement("input",{className:"popup__input popup__input_margin_bottom-input popup__input_type_about-me",id:"about-me-input",type:"text",name:"profession",minLength:"2",maxLength:"400",placeholder:this.props.placeholder2,style:{display:this.props.isDisplayed?"block":"none"},required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"about-me-input-error",style:{display:this.props.isDisplayed?"block":"none"}}),o.a.createElement("button",{className:"popup__submit create-button button",type:"submit"},"Save"))))}}]),n}(o.a.Component),g=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"popup popup_type_image ".concat(this.props.open)},o.a.createElement("div",{className:"popup__image-container"},o.a.createElement("button",{className:"popup__close button",onClick:this.props.onClosePopup}),o.a.createElement("figure",{className:"popup__figure-container"},o.a.createElement("img",{src:this.props.link,alt:this.props.name,className:"popup__full-size-image"}),o.a.createElement("figcaption",{className:"popup__image-caption"},this.props.name))))}}]),n}(o.a.Component);var v=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],s=o.a.useState(!1),r=Object(i.a)(s,2),c=r[0],l=r[1],p=o.a.useState(!1),u=Object(i.a)(p,2),m=u[0],h=u[1],d=o.a.useState(!1),f=Object(i.a)(d,2),v=f[0],y=f[1],j=o.a.useState({}),N=Object(i.a)(j,2),C=N[0],O=N[1],P=function(){a(!1),l(!1),h(!1),y(!1)};return document.addEventListener("keyup",(function(e){"Escape"===e.key&&P()})),o.a.createElement("div",{className:"page"},o.a.createElement(_,null),o.a.createElement(b,{onEditProfile:function(){console.log("clicked popup"),a(!0)},onAddPlace:function(){console.log("clicked popup"),l(!0)},onEditAvatar:function(){console.log("clicked popup"),h(!0)},onCardClick:function(e){!function(e){console.log(e),y(!0),O(e)}(e)}}),o.a.createElement(E,null),m&&o.a.createElement(k,{onClosePopup:P,type:"profile-pic",open:"popup_opened",title:"Change profile picture",placeholder1:"Image Link",isDisplayed:!1}),n&&o.a.createElement(k,{onClosePopup:P,type:"edit",open:"popup_opened",title:"Edit profile",placeholder1:"Name",placeholder2:"About me",isDisplayed:!0}),c&&o.a.createElement(k,{onClosePopup:P,type:"add",open:"popup_opened",title:"New place",placeholder1:"Title",placeholder2:"Image Link",isDisplayed:!0}),v&&o.a.createElement(g,{open:"popup_opened",link:C.link,name:C.name,onClosePopup:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n.p+"static/media/logo.3e6893cd.svg"},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.0c8ed027.chunk.js.map